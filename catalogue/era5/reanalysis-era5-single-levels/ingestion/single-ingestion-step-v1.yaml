steps:
- xarray_open_kwargs:
    chunks: {}
    filename_or_obj: s3://edc-era5/reanalysis-era5-single-levels-v0.zarr
    drop_variables:
      [
         'alnid',
         'alnip',
         'aluvd',
         'aluvp',
         'anor',
         'asn',
         'bld',
         'blh',
         'cape',
         'cdir',
         'chnk',
         'cin',
         'cl',
         'cp',
         'crr',
         'csf',
         'csfr',
         'cvh',
         'cvl',
         'd2m',
         'dctb',
         'dl',
         'dndza',
         'dndzn',
         'e',
         'es',
         'ewss',
         'fal',
         'fdir',
         'flsr',
         'fsr',
         'gwd',
         'hcc',
         'ie',
         'iews',
         'ilspf',
         'inss',
         'ishf',
         'isor',
         'istl1',
         'istl2',
         'istl3',
         'istl4',
         'kx',
         'lai_hv',
         'lai_lv',
         'lblt',
         'lcc',
         'lgws',
         'licd',
         'lict',
         'lmld',
         'lmlt',
         'lsf',
         'lshf',
         'lsm',
         'lsp',
         'lspf',
         'lsrr',
         'lssfr',
         'ltlt',
         'mcc',
         'mn2t',
         'mntpr',
         'msl',
         'mx2t',
         'mxtpr',
         'pev',
         'ptype',
         'ro',
         'rsn',
         'sd',
         'sf',
         'skt',
         'slhf',
         'slt',
         'smlt',
         'sp',
         'sro',
         'sshf',
         'ssr',
         'ssrc',
         'ssrd',
         'ssrdc',
         'ssro',
         'sst',
         'stl1',
         'stl2',
         'stl3',
         'stl4',
         'str',
         'strc',
         'strd',
         'strdc',
         'swvl1',
         'swvl2',
         'swvl3',
         'swvl4',
         'tcc',
         'tciw',
         'tclw',
         'tcrw',
         'tcsw',
         'tisr',
         'tp',
         'tsn',
         'tsr',
         'tsrc',
         'ttr',
         'ttrc',
         'tvh',
         'tvl',
         'u10',
         'u100',
         'u10n',
         'uvb',
         'v10',
         'v100',
         'v10n',
         'viiwd',
         'viiwe',
         'viiwn',
         'vilwd',
         'vilwe',
         'vilwn',
         'z',
         'zust'
      ]
  chunks: {latitude: 64, longitude: 64, valid_time: 360}

  robust_to_zarr_kwargs: {restart_dim: valid_time, restart_block_size: 1, retries: 3}
  to_zarr_kwargs: {
    store: s3://edc-era5/reanalysis-era5-single-levels-v1.0.zarr,
    consolidated: None, #means attempt to read consolidated metadata on open, if not present fallback
  }
  to_zarr_encoding:
       t2m:
          filters:
               - { id: bitround, keepbits: 13 }
          compressors:
               - {id: blosc, cname: zstd, clevel: 5}
