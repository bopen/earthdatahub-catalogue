steps:
- xarray_open_kwargs:
    cache_kwargs: { cache_file: false }
    open_dataset_kwargs:
      time_dims: [ valid_time ]
    chunks: {}
    engine: ecmwf
    filename_or_obj:
      dataset: reanalysis-era5-single-levels
      date: [1940-01-01/1940-01-02]
      time: [ '00:00', '01:00', '02:00', '03:00', '04:00', '05:00', '06:00', '07:00', '08:00', '09:00', '10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00', '18:00', '19:00', '20:00', '21:00', '22:00', '23:00' ]
      product_type: reanalysis
      variable: [
        '2m_temperature',
      ]
    request_chunker_kwargs: { time_dim: valid_time }
    request_chunks: { day: 1 }
    client_kwargs: { key: put_you_cds_key_here, url: https://cds.climate.copernicus.eu/api }

  open_dataset_name: open_dataset_fix_era5_single_levels_names
  chunks: { latitude: 512, longitude: 512, valid_time: 24 }

  robust_to_zarr_kwargs: {processing_dim: valid_time, chunks_per_processing_batch: 1, retries: 3}
  to_zarr_kwargs: {
    store: s3://edc-temp/nm/era5/test-era5-sl-v0.zarr,
    #consolidated: None, #means attempt to read consolidated metadata on open, if not present fallback
    #storage_options: {'asynchronous': False}
  }
