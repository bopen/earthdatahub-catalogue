steps:
- xarray_open_kwargs:
    chunks: {}
    engine: esgf
    download: true
    check_files: false
    retries: 3
    drop_variables: type
    sel:
      time:
        slice: [ "2000", "2100" ]
    filename_or_obj:
      #"data_node": vesg.ipsl.upmc.fr
      data_node: esgf3.dkrz.de
      "project": CMIP6
      "experiment_id": [
        "ssp119",
        "ssp126",
        "ssp245",
        "ssp370",
        "ssp434",
        "ssp460",
        #"ssp534-over",
        "ssp585"
      ]
      "source_id": IPSL-CM6A-LR
      "frequency": [ "day", "fx" ]
      "table_id": [ "fx", "day" ]
      #"realm": "atmos"
      "variant_label": r1i1p1f1
      "grid_label": gr
      "variable_id": [
        "orog",
        "sftlf",
        "areacella",

        "tas",
        "tasmin",
        "tasmax",
        "hurs",
        "hursmin",
        "hursmax",
        "uas",
        "vas",
        "hfss",
        "prsn",
        "psl",
        "rlut",
        "sfcWind",
        "rlus",
        "rsus",
        "rlds",
        "rsds",
        "sfcWindmax",
        "pr",
        "prc",
        "clt",
        "hfls",
      ]
    concat_dims: experiment_id
    esgpull_path: /data/esgpull
    index_node: esgf.ceda.ac.uk
  chunks: {time: 720, lat: 143, lon: 36}
  to_zarr_kwargs: {
    store: s3://edh-root/cmip6/IPSL-CM6A-LR-ScenarioMIP-r1i1p1f1-day-gr-v0.zarr,
    storage_options: {
      client_kwargs: { endpoint_url: https://s3.gra.io.cloud.ovh.net }
    }
  }
  robust_to_zarr_kwargs: {
    processing_dim: time,
    chunks_per_processing_batch: 32,
    retries: 3,
  }