steps:
- xarray_open_kwargs:
    chunks: {}
    engine: esgf
    download: true
    check_files: false
    retries: 3
    filename_or_obj:
      "project": CMIP6
      "activity_id" : ScenarioMIP
      "experiment_id": ["ssp126", "ssp245", "ssp370", "ssp585"]
      "source_id": CMCC-CM2-SR5
      "frequency": ["day", "fx"]
      "table_id": ["day"]
      "variant_label": r1i1p1f1
      "grid_label": gn
      "variable_id": [
        "sftlf",
        #"snc",
        #"sfcWindmax",
        #"sfcWind",
        #"rsus",
        #"prsn",
        #"prc",
        #"hfss",
        #"hfls",
        #"clt",
        #"mrsos",
        #"mrso",
        #"mrro",
        #"areacella",
        #"pr",
        #"tas",
        #"hurs",
        #"huss",
        #"psl",
        #"uas",
        #"vas",
        #"rsds",
        #"rlut",
        #"rlus",
        #"rlds"
      ]
    concat_dims: experiment_id
    esgpull_path: /data/esgpull
    index_node: esgf.ceda.ac.uk
    #index_node: esgf-data.dkrz.de
    #index_node: esgf.nci.org.au
    #index_node: esgf-node.ornl.gov/esgf-1-5-bridge
  chunks: {experiment_id: 1, time: 720, lat: 32, lon: 72 }
  to_zarr_kwargs: {
    store: s3://edh-root/cmip6/CMCC-CM2-SR5-ScenarioMIP-r1i1p1f1-day-gn-v0.zarr,
    storage_options: {
      client_kwargs: { endpoint_url: https://s3.gra.io.cloud.ovh.net }
    }
  }
  robust_to_zarr_kwargs: {
    processing_dim: time,
    chunks_per_processing_batch: 32,
    retries: 3
  }
