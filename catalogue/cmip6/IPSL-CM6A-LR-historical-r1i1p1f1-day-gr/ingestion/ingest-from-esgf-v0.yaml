steps:
- xarray_open_kwargs:
    chunks: {}
    engine: esgf
    download: true
    retries: 3
    filename_or_obj:
      "project": CMIP6
      "experiment_id": historical
      "source_id": IPSL-CM6A-LR
      "frequency": ["day", "fx"]
      "variable_id": ["areacella", "pr", "tas"] #"hurs", "psl", "uas", "vas"
      #"variable_id": ["rsds", "rlut","rlus","rlds"]
      "variant_label": r1i1p1f1
      "grid_label": gr
    concat_dims: experiment_id
    esgpull_path: /data/esgpull
    index_node: esgf.nci.org.au
  chunks: {experiment_id: 1, time: 180, lat: 128, lon: 128}
  to_zarr_kwargs: {
    store: s3://edh-root/cmip6/IPSL-CM6A-LR-historical-r1i1p1f1-day-gr-v0.zarr,
    storage_options: {
      key: 3c3d8fe87ec04e9b9c3a07e10ecc8daa,
      secret: f8d4d5713147465aafc9e7f3649223e7,
      client_kwargs: { endpoint_url: https://s3.gra.io.cloud.ovh.net }
    }
  }
  robust_to_zarr_kwargs: {
    processing_dim: time,
    chunks_per_processing_batch: 8,
    retries: 3,
  }